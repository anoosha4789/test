<mat-card class="m-2 gw-config-container" cdkTrapFocus>

    <mat-card-content id="gw-mat-card-content">

        <mat-tab-group [selectedIndex]="0" class="gw-tab-group">

            <mat-tab label="Network Settings">
                <!-- <div class="pl-3 py-2 gw-warning-block gw-form-label" *ngIf="validationErrorMsg">
                    <b>{{validationErrorMsg}}</b>
                </div> -->
                        <div class="gw-network-container"  >
                            <div class="row mat-subtitle-1 m-0">
                                <div class="col-3">
                                </div>
                                <div class="col-3 mat-caption-14px">
                                    Current 
                                </div>
                                <div class="col-3 mat-caption-14px">
                                    New
                                </div>
                        </div>
                    </div>
                    <form [formGroup]="networkSettingForm" autocomplete="off" class="form-overflow">
                        <ng-container formArrayName="networkDetails">
                            <div class="mx-3" *ngFor="let network of networkList; let idx = index; let first = first; "
                                [formGroupName]="idx">

                                <h6 class="py-2 ">
                                    <span class="mat-subtitle-2">{{network.Description}}</span>
                                </h6>
                                <div class="mx-2">
                                    <ng-container formGroupName="IpAddressList">
                                        <div class="row">

                                            <div class="pr-2 py-2 pl-4 col-3">
                                                <mat-label class="gw-form-label ">IP Address</mat-label>
                                            </div>
                                            <div class="px-2 py-2 col-3">
                                                <mat-label class="gw-form-label font-weight-normal break-word">{{network.IpAddress}}</mat-label>
                                            </div>
                                            <div class="px-2 col-6" *ngIf="network.IpAddressList">
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="ipPartOne" type="number" matInput
                                                        class="mat-body-2 form-baseline"
                                                        [(value)]="network.IpAddressList[0]"
                                                        gw-ip-input>

                                                </mat-form-field>
                                                <span class="pr-2">.</span>
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="ipPartTwo" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.IpAddressList[1]">
                                                </mat-form-field>
                                                <span class="pr-2">.</span>
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="ipPartThree" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.IpAddressList[2]">
                                                </mat-form-field>
                                                <span class="pr-2">.</span>
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="ipPartFour" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.IpAddressList[3]">
                                                </mat-form-field>
                                                    <mat-hint *ngIf="t[idx].controls.IpAddressList.controls.ipPartOne.invalid || 
                                                    t[idx].controls.IpAddressList.controls.ipPartTwo.invalid ||
                                                    t[idx].controls.IpAddressList.controls.ipPartThree.invalid  ||
                                                    t[idx].controls.IpAddressList.controls.ipPartFour.invalid "
                                                        class="mat-error gw-network-settings-mat-hint p-l-4">
                                                        * Invalid IP Address.
                                                    </mat-hint>
                                            </div>
                                        </div>
                                       
                                    </ng-container>
                                    <ng-container formGroupName="SubnetMaskList">
                                        <div class="row">
                                            <div class="pr-2 py-2 pl-4 col-3">
                                                <mat-label class="gw-form-label ">Subnet Mask</mat-label>
                                            </div>
                                            <div class="px-2 py-2 col-3">
                                                <mat-label class="gw-form-label font-weight-normal break-word">{{network.SubnetMask}}</mat-label>
                                            </div>
                                            <div class="px-2 col-6">
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="subnetPartOne" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.SubnetMaskList[0]">
                                                </mat-form-field>
                                                <span class="pr-2">.</span>
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="subnetPartTwo" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.SubnetMaskList[1]">
                                                </mat-form-field>
                                                <span class="pr-2">.</span>
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="subnetPartThree" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.SubnetMaskList[2]">
                                                </mat-form-field>
                                                <span class="pr-2">.</span>
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="subnetPartFour" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.SubnetMaskList[3]">
                                                </mat-form-field>
                                                <mat-hint *ngIf="t[idx].controls.SubnetMaskList.controls.subnetPartOne.invalid || 
                                                t[idx].controls.SubnetMaskList.controls.subnetPartTwo.invalid ||
                                                t[idx].controls.SubnetMaskList.controls.subnetPartThree.invalid  ||
                                                t[idx].controls.SubnetMaskList.controls.subnetPartFour.invalid "
                                                    class="mat-error gw-network-settings-mat-hint p-l-4">
                                                    * Invalid Subnet Mask.
                                                </mat-hint>
                                            </div>
                                        </div>
                                    </ng-container>
                                    <ng-container formGroupName="DefaultGatewayList">
                                        <div class="row">
                                            <div class="pr-2 py-2 pl-4  col-3">
                                                <mat-label class="gw-form-label ">Default Gateway</mat-label>
                                            </div>
                                            <div class="px-2 py-2 col-3">
                                                <mat-label class="gw-form-label font-weight-normal  break-word">
                                                    {{network.DefaultGateway ? network.DefaultGateway: 'N/A'}}
                                                </mat-label>
                                            </div>
                                            <div class="px-2 col-6" *ngIf="network.DefaultGatewayList">
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="gatewayPartOne" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.DefaultGatewayList[0]">
                                                </mat-form-field>
                                                <span class="pr-2">.</span>
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="gatewayPartTwo" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.DefaultGatewayList[1]">
                                                </mat-form-field>
                                                <span class="pr-2">.</span>
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="gatewayPartThree" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.DefaultGatewayList[2]">
                                                </mat-form-field>
                                                <span class="pr-2">.</span>
                                                <mat-form-field class="mat-input-small gw-network-input"
                                                    appearance="fill">
                                                    <input formControlName="gatewayPartFour" type="number" matInput
                                                        gw-ip-input class="mat-body-2 form-baseline"
                                                        [(value)]="network.DefaultGatewayList[3]">
                                                </mat-form-field>
                                                <mat-hint *ngIf="t[idx].controls.DefaultGatewayList.controls.gatewayPartOne.invalid ||
                                                t[idx].controls.DefaultGatewayList.controls.gatewayPartTwo.invalid ||
                                                t[idx].controls.DefaultGatewayList.controls.gatewayPartThree.invalid  ||
                                                t[idx].controls.DefaultGatewayList.controls.gatewayPartFour.invalid "
                                                    class="mat-error gw-network-settings-mat-hint p-l-4">
                                                    * Invalid Default Gateway.
                                                </mat-hint>
                                            </div>
                                        </div>
                                    </ng-container>

                                </div>
                            </div>
                        </ng-container>
                    </form>

            </mat-tab>

        </mat-tab-group>
    </mat-card-content>

    <mat-card-actions>
        <mat-divider></mat-divider>
        <div class="d-flex justify-content-between gw-mt-12">
            <div class="d-flex ml-3 gw-warning-block mat-error">
                <mat-icon class="pt-2 gw-warning-icon">warning</mat-icon>
                <span>Changing the Network Settings will trigger a server restart.</span>
            </div>
            <div class="gw-network-setting-action">
                <button type="submit" mat-button class="mat-button-primary-sm mr-0" 
                    [disabled]="!networkSettingForm.dirty || !networkSettingForm.valid"
                    (click)="updateSystemIPAdress()">
                    Set IP Address</button>
            </div>
        </div>
    </mat-card-actions>

</mat-card>